# IP和域名裂变工具说明书
# 版本: 1.0
# 日期: 2024-01-14
# 作者: CLAUDE

一、工具简介
============
IP和域名裂变工具是一个用于自动化发现和扩展IP地址与域名关联关系的Python工具。它能够通过已知的IP地址发现关联域名，并通过域名反向查找新的IP地址，实现信息的"裂变式"扩展。

二、核心功能
============
1. IP反查域名
   - 支持多个查询网站
   - 自动重试和切换
   - 并发查询处理
   - 结果自动去重

2. 域名解析IP
   - DNS批量查询
   - 并发处理
   - 公网IP过滤
   - 结果合并去重

3. 自动化处理
   - 文件自动创建
   - 增量更新
   - 错误处理
   - 日志输出

三、环境要求
============
1. Python环境
   - Python 3.6+
   - pip包管理器

2. 依赖包
   - requests
   - lxml
   - fake-useragent
   - urllib3

3. 系统要求
   - 支持nslookup命令
   - 网络连接正常
   - 足够的系统内存

四、配置说明
============
1. 文件配置
   - Fission_ip.txt: IP地址文件
   - Fission_domain.txt: 域名文件
   - dns_result.txt: DNS查询结果文件

2. 并发配置
   - max_workers_request: 并发请求数(默认20)
   - max_workers_dns: 并发DNS查询数(默认50)

3. 网站配置
   - site_ip138
   - dnsdblookup
   - ipchaxun

五、使用方法
============
1. 基础使用
   a) 准备IP文件
      - 创建Fission_ip.txt
      - 每行一个IP地址
      - 支持增量添加

   b) 运行程序
      - python ip.txt
      - 等待程序完成
      - 查看结果文件

2. 结果处理
   - 检查Fission_domain.txt获取域名
   - 查看dns_result.txt了解详细记录
   - 新发现的IP会自动添加到Fission_ip.txt

3. 注意事项
   - 确保文件编码为UTF-8
   - 保持网络连接稳定
   - 适当调整并发数
   - 定期清理结果文件

六、工作流程
============
1. 初始化
   - 检查必要文件
   - 创建缺失文件
   - 初始化HTTP会话

2. IP反查域名
   - 读取IP列表
   - 并发查询域名
   - 合并现有结果
   - 保存更新结果

3. 域名解析IP
   - 读取域名列表
   - 执行DNS查询
   - 提取有效IP
   - 更新IP文件

七、常见问题
============
1. 查询失败
   问题: 某些IP查询失败
   解决: 
   - 检查网络连接
   - 增加重试次数
   - 更换查询网站

2. 性能问题
   问题: 程序运行缓慢
   解决:
   - 调整并发数
   - 减少查询数量
   - 增加内存配置

3. 结果问题
   问题: 结果不完整
   解决:
   - 检查文件权限
   - 验证文件编码
   - 查看错误日志

八、进阶应用
============
1. 自定义配置
   - 添加新的查询网站
   - 调整查询参数
   - 修改输出格式

2. 结果分析
   - 统计关联关系
   - 导出特定格式
   - 数据可视化

3. 自动化集成
   - 定时任务
   - 监控告警
   - 结果推送

九、更新记录
============
2024-01-14：V1.0
- 首次发布
- 实现基本功能
- 支持并发处理
- 添加错误处理 